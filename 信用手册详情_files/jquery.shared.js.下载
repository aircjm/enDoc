var toString=Object.prototype.toString,sysParseInt=parseInt;parseInt=function(b,a){return sysParseInt(b,a?a:10)};if(!String.prototype.startsWith){String.prototype.startsWith=function(a){if(!a){return false}return this.indexOf(a,0)==0}}if(!String.prototype.endsWith){String.prototype.endsWith=function(b){if(!b){return false}var a=this.lastIndexOf(b);if(a<0){return false}return a+b.length==this.length}}if(!String.prototype.trim){String.prototype.trim=function(){var a=this.length,d="",c=null,f=-1,e=-1;for(var b=0;b<a;b++){c=this.charAt(b);if(c==" "||c=="\t"){continue}f=b;break}if(f<0){return""}for(var b=a-1;b>=0;b--){c=this.charAt(b);if(c==" "||c=="\t"){continue}e=b;break}return this.substring(f,e+1)}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,c){var d=this,a=d.length;for(var b=0;b<a;b++){if(!c||b>=c){if(js.IsEqualTo(d[b],e,false)){return b}}}return -1}}if(!Array.prototype.removeAt){Array.prototype.removeAt=function(b){var d=this,a=d.length;if(b===undefined||b===null||b<0){return null}var e=this[b];for(var c=b;c<a-1;c++){this[c]=this[c+1]}this.length--;return e}}if(!Array.prototype.remove){Array.prototype.remove=function(c){var b=this,a=this.indexOf(c);return this.removeAt(a)}}if(!Array.prototype.forEach){Array.prototype.forEach=function(d,b){var c=this;for(var a=0;a<c.length;a++){if(d){d.call(b||c,c[a])}}return c}}if(!Array.prototype.map){Array.prototype.map=function(d,b){var c=this;for(var a=0;a<c.length;a++){if(d){c[a]=d.call(b||c,c[a])}}return c}}if(!Date.prototype.toLocaleDateString){Date.prototype.toLocaleDateString=function(){var a=this;if(a.toDateString){return a.toDateString()}return js.FormatDate(a,true)}}if(!Function.prototype.bind){Function.prototype.bind=function(b){if(typeof this!=="function"){throw new TypeError(this+" cannot be bound as it is not a function")}var d=Array.prototype.slice.call(arguments,1);var c=this;var e=function(){};var a=this instanceof e&&b?this:b;var f=function(){return c.apply(a,d.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e();return f}}if(!Function.prototype.bind){Function.prototype.bind=function(b){if(typeof this!=="function"){throw new TypeError(this+" cannot be bound as it is not a function")}var d=Array.prototype.slice.call(arguments,1);var c=this;var e=function(){};var a=this instanceof e&&b?this:b;var f=function(){return c.apply(a,d.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e();return f}}if(!window.navigate&&window.open){window.navigate=window.open}window.js={DefaultTheme:"classic",EmptyFn:function(){},Md5:null,HtmlTemplate:{},ExtHtmlTemplate:{},PreInitControls:{Forms:{_All:[]},Buttons:{_All:[]},TextBoxs:{_All:[]}},Functions:{},Methods:{_IsInited:false},_buttons:{},_TooltipCache:{},Caches:{},CacheQueryTags:{},CacheQueringQueues:{},GetCacheUrl:function(b,c){if(!b){return""}if(b.indexOf("/")>=0){return b}var a=js.Sys.CacheUrls[b]||("Query"+b);if(!a||!c){return a}return js.Web.AppendUrlParams(a,{_q4all:c})},ProcessCacheWithPinyin:function(a){var d=js.Caches[a],f=d._items_;for(var c=0;c<f.length;c++){var e=f[c];var b=e.DisplayString;if(js.UI.PinYin&&b){b=js.UI.PinYin.CC2PY(b)}if(b){e.__PinyinText=b.toUpperCase()}}js.Math.Sort(f,function(h,g){if(h==g){return 0}if(!h){return -1}if(!g){return 1}if(h.Prority==g.Prority){if(h.__PinyinText<g.__PinyinText){return -1}if(h.__PinyinText==g.__PinyinText){return 0}return 1}else{if(h.Prority<g.Prority){return -1}else{return 1}}});d._items_=f;d._isReady_=true},LoadPreloadCaches:function(){var c=js.Web.GenerateUrl("Home","QueryPreloadCaches",null,null,null,null,null,null,false,true);function a(d,h){var g=js.Caches[d];if(js.IsArray(h)){if(!g){js.Caches[d]=g={}}g._items_=h;for(var f=0;f<h.length;f++){g[h[f].Key]=h[f]}}else{js.Caches[d]=g=h;var j=[];for(var e in g){if(g[e]&&g[e].Key){j.push(g[e])}}g._items_=j}}function b(d){js.Web.AjaxRequest(this,c,null,function(g,f){if(g&&f&&f.tag){for(var e in f.tag){a(e,f.tag[e])}return}if(d>1){js.Web.ShowAlertMsg("加载缓存失败, 如果需要请重试!")}else{b(d+1)}},null,null,false,false,true,60000)}b(0)},GetJsonCache:function(cache_id,update_refresh_date,callback,scope){var url=js.Web.GenerateUrl("Home","GetJsonCache");js.Web.AjaxRequest(this,url,{cache_id:cache_id,update_refresh_date:update_refresh_date},function(success,data){if(data&&success===undefined){success=true}var tag=data;if(data&&data.tag){tag=data.tag}if(js.IsString(tag)){try{data=eval("("+tag+")")}catch(ex){}}try{if(callback){callback.call(scope||this,success,tag)}}catch(ex){alert(ex)}},null,null,false,false,true)},SetJsonCache:function(b,e,d,a,f){var c=null;if(js.IsObject(e)){e=js.ToJsonString(e,true)}if(b&&b.indexOf("?")>=0){c=b}else{c=js.Web.GenerateUrl("Home","SetJsonCache",null,{cache_id:b})}js.Web.AjaxRequest(this,c,{content:e,category_id:d,user_id:a},f,null,null,false,false,true)},_RefreshCache:function(s,d,k,h,b){var g=js.GetCacheUrl(s),q=this,a=null,p={},l=js.Caches[s],r={},f=[],j={},e=new Date();if(!g){try{if(h){h.call(b||q,true,r,{name:s,force:d,ids:k})}}catch(o){alert(o)}return}if(l&&!l._isReady_&&l._items_){js.ProcessCacheWithPinyin(s)}if(k&&!js.IsArray(k)){k=[k]}if(h){a={callback:h,ids:k,force:d,name:s,scope:b||q}}js.Each(k,function(v,u){if(!v){return}if(v&&js.IsString(v)){v=v.trim()}if(l&&l[v]){r[v]=l[v]}else{if(v=="空"||v=="(空)"||(v.startsWith&&v.startsWith("请选择"))){return}var w=s+"_"+v,t=js.CacheQueryTags[w];if(!t){j[v]=v}else{if(a&&js.CacheQueringQueues[w]){js.CacheQueringQueues[w].push(a)}}}});for(var n in j){var c=s+"_"+n;js.CacheQueryTags[c]=e;if(!js.CacheQueringQueues[c]){js.CacheQueringQueues[c]=[]}f.push(n)}if(!l){js.Caches[s]=l={}}function m(A,C,y){var z=y.ids,B=y.name,t=null,w=null;for(var v=0;v<z.length;v++){c=B+"_"+z[v];t=js.CacheQueringQueues[c];delete js.CacheQueringQueues[c];if(t){for(var u=0;u<t.length;u++){w=t[u];if(w.callback){try{w.callback.call(w.scope,A,C,w)}catch(x){alert("回调时失败，附加信息:"+x)}}}}}}if(f.length>0){js.Web.AjaxRequest(this,g,{ids:f,name:s,force:d,_addRandom:false},function(y,C,x){if(y&&C){var B=C.rows||C.tag,v=B.length,A,t=js.Caches[x.name],z={};for(var u=0;u<v;u++){A=B[u];t[A.Key]=A;z[A.Key]=A;delete js.CacheQueryTags[x.name+"_"+A.Key]}try{if(h){h.call(b||q,y,z,x)}}catch(w){alert(w)}m(y,z,x)}else{try{if(h){h.call(b||q,false,{},x)}}catch(w){alert(w)}m(false,{},x)}},null,null,true,false,true)}else{try{if(h){h.call(b||q,true,r,{name:s,force:d,ids:k})}}catch(o){alert(o)}}},SupportImageExts:/\.([jJ][pP][gG]){1}$|\.([jJ][pP][eE][gG]){1}$|\.([gG][iI][fF]){1}$|\.([pP][nN][gG]){1}$|\.([bB][mM][pP]){1}$/,GetCache:function(c,d){var a=js.Sys.IsHostWindow?window:js.Sys.HostWindow;if(!a.js.Caches){return null}var b=a.js.Caches[c];if(!b){return null}if(b&&!b._isReady_&&b._items_){js.ProcessCacheWithPinyin(c)}return b[d]},RefreshCache:function(a,c,b,d){if(js.Sys.IsHostWindow&&js._RefreshCache){return js._RefreshCache(a,c,b,d)}if(js.Sys.HostWindow.js._RefreshCache){return js.Sys.HostWindow.js._RefreshCache(a,c,b,d)}return false},SSL_SECURE_URL:"about:blank",Orignal:{Date:{},String:{}},InitOrignal:function(){js.Orignal.Date.parse=Date.parse;js.Orignal.String.format=String.format},Sys:{DateFormatString:"dd/MM/yyyy",DateTimeFormatString:"dd/MM/yyyy HH:mm:ss",TimeSpanFormatString:"HH:mm",UserId:null,UserName:null,GlobalParams:{Security4All:null},HostWindow:window,IsHostWindow:false,UserData:{},UserRelatedCacheName:"User",OwnerRelatedCacheName:null,CacheUrls:{},lang:"zh-CN",TabIndex:0,SystemDisplayMode:0,IsMobileDevice:false,sys_r:Math.round(Math.random()*10000),InitEditFields:true,Debug:false,Version:1,ControllerName:"",ActionName:"",CurrentUrl:"",Month:[1,2,3,4,5,6,7,8,9,10,11,12],Currency:null,Chars:["A","B","C","D","E","F","G","H"],DaysOfMonth:[31,28,31,30,31,30,31,31,30,31,30,31],TicksOfDay:86400000,AppPath:"/",EnableJqueryUI:false,EnableTabs:false,EnableAlert:false,UITrace:false,ClientTimeStamp:new Date(),ServerTimeStamp:new Date(),ServerClientIntervalTicks:null,id:0,GetServerTime:function(){if(js.Sys.ServerClientIntervalTicks===null){if(typeof(js.Sys.ServerTimeStamp)=="string"){js.Sys.ServerTimeStamp=Date.parse(js.Sys.ServerTimeStamp)}js.Sys.ServerClientIntervalTicks=js.Sys.ServerTimeStamp-js.Sys.ClientTimeStamp}return new Date(Number(new Date())+Number(js.Sys.ServerClientIntervalTicks))},CheckUserAuthroizationConflict:function(){var c=js.Web.FindWindow(window);if(!c||c==window||!c.js||!c.js.Sys||!c.js.Sys.UserData){return false}var b=c.js.Sys.UserData.UserId;if(!js.Sys.UserData){return false}var a=js.Sys.UserData.UserId;if(b!=a){return true}return false},ShowDebugAlert:function(c,b,a){if(b&&!js.Sys.Debug){return}if(a!==false){alert("[调试信息]"+c);return}js.Web.ShowAlertMsg(c,"调试信息")}},GetClassfiedClassName:function(a,d,b){var c=b||js.Sys.ActionName+(a?"Control":"ViewPage");return(a?"Controls.":"Pages.")+(d||js.Sys.ControllerName)+"."+c},RunDelay:function(b,c,d,a){if(b){window.clearInterval(b)}return window.setTimeout(d,c,a)},Apply:function(d,e,b){if(d===true){d={}}if(b){js.Apply(d,b)}if(d&&e&&typeof e=="object"){for(var a in e){d[a]=e[a]}}return d},CreateNewId:function(){js.Sys.id++;return"js-eui-id"+js.Sys.id},Server:window.Server,LoadingMask:{RefCount:0,TargetCon:null,MsgCon:null,IsVisible:false,Handles:[]},CssColors:["red","yellow","blue","orange","green","purple","lightRed"],GenerateUnquieId:function(){var a=[];for(var b=0;b<16;b++){a[b]=Math.round(Math.random()*255)}return js.BytesToString(a)},IsArray:function(a){return toString.apply(a)==="[object Array]"},IsNull:function(a){if(a===undefined||a===null){return true}return false},IsDate:function(a){return toString.apply(a)==="[object Date]"},IsObject:function(a){return !!a&&Object.prototype.toString.call(a)==="[object Object]"},IsFunction:function(a){return toString.apply(a)==="[object Function]"},IsString:function(a){return typeof a==="string"},IsBoolean:function(a){return typeof a==="boolean"},IsNumber:function(a){return typeof a==="number"&&isFinite(a)},IsDefined:function(a){return typeof a!=="undefined"},IsEmpty:function(b,a){return b===null||b===undefined||((js.IsArray(b)&&!b.length))||(!a?b==="":false)},IsJQuery:function(a){return a.jquery},IsMobilePhone:function(b){var a=/^0?1[0-9][0-9]\d{8}$/;return a.test(b)},IsEmail:function(a){var b=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return b.test(a)},IsCardNo:function(a){var b=/^[1-9](\d{16}|\d{13})[0-9xX]$/;return b.test(a)},IsExtRecord:function(a){if(!a){return false}if(a.get&&a.set&&a.modelName&&a.$className&&a.modelName.startsWith("Ext.data.Store")){return true}return false},FormatFloat:function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},FormatDate:function(a,b){if(!a){return a}if(b){return js.Renderer.DateRender(a)}return js.Renderer.DateTimeRender(a)},PadNumber:function(d,c){if(d===0&&c>0){var b="";for(var a=0;a<c;a++){b+="0"}return b}if(d==null||d===0||d<0||isNaN(d)){return d}c=c||1;var b=d;if(c>1&&d<10){b="0"+b}if(c>2&&d<100){b="0"+b}if(c>3&&d<1000){b="0"+b}if(c>4&&d<10000){b="0"+b}if(c>5&&d<100000){b="0"+b}if(c>6&&d<1000000){b="0"+b}if(c>7&&d<10000000){b="0"+b}if(c>8&&d<100000000){b="0"+b}if(c>9&&d<1000000000){b="0"+b}return b},GetSeparatedItems:function(b,a){if(!b){return[]}if(!a){a=/[,;]/}if(js.IsString(b)==false){b=b.toString()}return b.split(a)},FormatIDs:function(d,a,b){if(d==null){return""}if(b==null){b=","}var e="";for(var c=0;c<d.length;c++){var f=d[c];if(a){e+="'"}e+=f;if(a){e+="'"}e+=b}if(e){return e.substr(0,e.length-b.length)}return e},IsEqualTo:function(e,d,f){var c=true;if(js.IsDate(e)||js.IsDate(d)){e=Date.parse(e);d=Date.parse(d);if(!d||!e){c=false}else{if(f){if(js.FormatDate(e)!=js.FormatDate(d)){c=false}}else{if(e.getTime()!=d.getTime()){c=false}}}}else{if(d!=e){c=false}}return c},FormatObjectWithTemplate:function(j,b,d,g,h){var f=js.HtmlTemplate[j],e=this;if(d&&!f){var a=js.Web.GenerateUrl("Template",j),c=$('<div style="display:none;" class="template_holder"></div>').appendTo($("body"));c.load(a,null,function(l){if(l){js.HtmlTemplate[j]=f=c.html();var k=js.FormatObject(f,b);if(g){g.call(h||e,l,k,j,f)}}else{if(g){g.call(h||e,false,null,j)}}});return null}return js.FormatObject(f,b)},FormatObject:function(e,b,a){if(!e){if(!b){return""}if(js.IsDate(b)){return b.toDateString()}if(js.IsNumber(b)){return b}if(js.IsBoolean(b)){return b?"是":"否"}if(js.IsFunction(b)){return b.call(this)}return b.toString()}if(js.IsFunction(b)){return b.call(this,e)}if(js.IsObject(b)){if(b.data&&b.commit){b=b.data}if(a){for(var d in b){var h=null;if(!d.endsWith("_DisplayString")){h=b[d+"_DisplayString"]}if(h){b[d]=h}}}if(window.Ext&&window.Ext.XTemplate){var g=js.ExtHtmlTemplate[e];if(!g){g=new window.Ext.XTemplate(e);for(var c in window){g[c]=window[c]}js.ExtHtmlTemplate[e]=g}var f=g.apply(b,window);return f}for(var d in b){var h=b[d];e=e.replaceAll("{"+d+"}",js.FormatObject(null,h))}return e}return e.replaceAll("{0}",js.FormatObject(b))},IsIterable:function(a){if(js.IsArray(a)||a.callee){return true}if(/NodeList|HTMLCollection/.test(toString.call(a))){return true}return((typeof a.nextNode!="undefined"||a.item)&&js.IsNumber(a.length))},BytesToString:function(c){var e="",a=0;for(var d=0;d<c.length;d++){a=Math.floor(c[d]/16);if(a<10){e+=a}else{e+=js.Sys.Chars[a-10]}a=c[d]%16;if(a<10){e+=a}else{e+=js.Sys.Chars[a-10]}}return e},Iterate:function(e,d,c){if(js.IsEmpty(e)){return}if(js.IsIterable(e)){for(var b=0,a=e.length;b<a;b++){if(d.call(c||e[b],e[b],b,e)===false){return}}return}else{if(typeof e=="object"){for(var f in e){if(e.hasOwnProperty(f)){if(d.call(c||e,f,e[f],e)===false){return}}}}}},Each:function(g,h,k,c,d){if(js.IsNull(g)){return[]}if(!js.IsJQuery(g)&&(!js.IsIterable(g)||!js.IsArray(g))){g=[g]}var a=null;var l=[];if(d!==false){d=true}for(var e=0,f=g.length;e<f;e++){a=g[e];if(h){a=h.call(k||a,a,e,g)}if(js.IsNull(a)==false||c==false){if(typeof(a)!="string"&&js.IsArray(a)&&d==true){for(var b=0;b<a.length;b++){if(js.IsNull(a[b])==false||c==false){l.push(a[b])}}}else{l.push(a)}}}return l},CopyObject:function(a,f,e,d,j){var c={};var h;if(!f){f={}}else{js.Each(j,function(l,k,m){if(l){h=f[l];if(h!==undefined){c[l]=h}}},this,true,false)}if(e==null||e){for(var g in a){h=a[g];if(h==undefined){h=null}f[g]=h}}else{for(var g in a){if(js.IsNull(f[g])){f[g]=a[g]}}}if(d){for(var b in d){h=d[b];if(h==undefined){h=null}f[b]=h}}for(var g in c){f[g]=c[g]}return f},MergeObject:function(a,e,d,g,b){a=a||{};if(js.IsNull(g)){g=5}if(js.IsNull(b)){b=0}if(b>=g){return a}var h,f;for(var c in e){h=a[c];f=e[c];if(js.IsNull(f)==false){if(js.IsNull(h)){a[c]=f}else{if(js.IsArray(h)||js.IsDate(h)||js.IsString(h)||js.IsNumber(h)||js.IsFunction(h)||js.IsBoolean(h)){if(d){a[c]=f}}else{if(d&&(js.IsArray(f)||js.IsDate(f)||js.IsString(f)||js.IsNumber(f)||js.IsFunction(f)||js.IsBoolean(f))){a[c]=f}js.MergeObject(h,f,d,g,b+1)}}}}return a},Extend:function(){var b=function(d){for(var c in d){this[c]=d[c]}};var a=Object.prototype.constructor;return function(h,e,g){if(typeof e=="object"){g=e;e=h;h=g.constructor!=a?g.constructor:function(){e.apply(this,arguments)}}var d=function(){},f,c=e.prototype;d.prototype=c;f=h.prototype=new d();f.constructor=h;h.superclass=c;if(c.constructor==a){c.constructor=e}h.override=function(j){js.Override(h,j)};f.superclass=f.supr=(function(){return c});f.override=b;js.Override(h,g);h.extend=function(j){return js.Extend(h,j)};return h}}(),Override:function(c,e,b){if(e){var d=c.prototype;if(d==null&&b&&c){c.override=c.override||{};for(var a in e){c.override[a]=c[a]||function(){};c[a]=e[a]}}else{js.Apply(d,e);if(e.hasOwnProperty("toString")){d.toString=e.toString}}}},StopEvent:function(a){if(!a){return false}if(a.preventDefault){a.preventDefault()}else{if(window.event){a.returnValue=false}}},ForbiddenKeyEvent:function(a){},ToJsonString:function(e,b,j){var c=js.ToJsonString,a=null,h;switch(typeof(e)){case"string":return'"'+e.replace(/(["\\])/g,"\\$1")+'"';case"array":return"["+e.map(c,b,j).join(j?",\n":",")+"]";case"object":if(e instanceof Array){var l=[];var g=e.length;if(g>0||!b){for(var d=0;d<g;d++){a=c(e[d],b,j);if(a){l.push(a)}}return"["+l.join(j?",\n":",")+"]"}return""}else{if(e==null){return"null"}else{if(js.IsDate(e)){return'"'+(js.Renderer.DateTimeRender(e))+'"'}else{var f=[];for(var k in e){h=e[k];if(js.IsFunction(h)==false&&(!b||h)){a=c(e[k],b,j);if(a){f.push((k.replace(/(["\\])/g,"\\$1"))+":"+a)}}}if(f.length<=0){return""}return"{"+f.join(j?",\n":",")+"}"}}}case"number":return e;case"boolean":return e}return""},ToPercent:function(d,c,e){if(c==0){return 0}return js.ToPercision(d*100/c,e)},ToPercision:function(a,b){if(js.IsNull(b)){return a}return parseFloat(a).toFixed(b)},FindInArray:function(e,d,c){if(!e.length||!c){return d?null:[]}var a=[];for(var b=0;b<e.length;b++){if(c(e[b],b)){if(d){return e[b]}a.push(e[b])}}if(d){return null}return a},IsInArray:function(a,c){if(!a&&!c){return true}if(!a||!c){return false}for(var b=0;b<a.length;b++){if(a[b]==c){return true}}return false},TryMatchTwoTextArray:function(b,a,f){var h=b.length,e=a.length;if(!f){f=[];f.length=h}for(var d=0;d<h;d++){if(f[d]===undefined){for(var c=0;c<e;c++){if(a[c]==b[d]){f[d]=c;break}}}}for(var d=0;d<h;d++){if(f[d]===undefined){var g=b[d].toLowerCase();for(var c=0;c<e;c++){if(a[c].toLowerCase()==g){f[d]=c;break}}}}for(var d=0;d<h;d++){if(f[d]===undefined){for(var c=0;c<e;c++){if(b[d].indexOf(a[c])>=0){f[d]=c;break}}}}for(var d=0;d<h;d++){if(f[d]===undefined){var g=b[d].toLowerCase();for(var c=0;c<e;c++){if(g.indexOf(a[c].toLowerCase())>=0){f[d]=c;break}}}}return f}};if(!js.Browser){js.Browser=$.browser}js.CopyObject(js.Server,js.Sys,true);if(!js.Sys.UserData&&js.Sys.GlobalParams&&js.Sys.GlobalParams.UserData){js.Sys.UserData=js.Sys.GlobalParams.UserData}js.InitOrignal();js.Web={AjaxRequest:function(f,a,d,j,k,c,e,g,b,h){},_ZeroClipboard:null,LastClipboardText:null,BeforeFormSubmit:function(b,a){return true},GetFriendlyErrorMessage:function(a,b){if(a=="Not Found"){a="服务端没有对应您请求的响应方法"}return a},OpenFilePreviewWindow:function(c,a){if(!c){return}if(!a){a=js.Web.GenerateUrl("Account","DownloadFile",null,{id:c})}var d=c.lastIndexOf("."),b=d>=0?c.substring(d):c;if(b){b=b.toLowerCase()}if(b==".png"||b==".jpg"||b==".jpeg"||b==".gif"){}return window.open(a,c)},SetClipboard:function(c,b){if(false){return(window.clipboardData.setData("text",c))}else{var a=js.Web.GetZeroClipboard(b);if(a){a.setText(c)}else{js.Web.ShowAlertMsg(c)}return true}return false},_HtmlEncodeDiv:null,HtmlEncode:function(a){var b=js.Web._HtmlEncodeDiv;if(js.Web._HtmlEncodeDiv==null){b=document.createElement("div");js.Web._HtmlEncodeDiv=b}b.innerHTML="";b.appendChild(document.createTextNode(a));return b.innerHTML},HtmlDecode:function(a){var b=js.Web._HtmlEncodeDiv;if(js.Web._HtmlEncodeDiv==null){b=document.createElement("div");js.Web._HtmlEncodeDiv=b}b.innerHTML=a;return b.innerHTML},AppendUrlCommonVars:function(b,c){if(!b){return b}if(c){var a=b.match(/\?sys\_r\=[0-9\-\.]*/i);if(a!=null){b=b.replace(a[0],"?sys_r="+Math.round(Math.random()*10000))}else{a=b.match(/\&sys\_r\=[0-9\-\.]*/i);if(a!=null){b=b.replace(a[0],"&sys_r="+Math.round(Math.random()*10000))}}}var a=b.match(/\?lang\=[0-9\-\.a-zA-Z]*/i);if(a!=null){b=b.replace(a[0],"?lang="+js.Sys.lang)}else{a=b.match(/\&lang\=[0-9\-\.a-zA-Z]*/i);if(a!=null){b=b.replace(a[0],"&lang="+js.Sys.lang)}}b=js.Web.ResolveUrlOption(b,"theme",js.DefaultTheme);if(js.Sys.UserId){b=js.Web.ResolveUrlOption(b,"_usid",js.Sys.UserId)}return b},ResolveUrlOption:function(c,d,a,f){var e=js.Web.HasOption(d,c,true);if(f){}else{if(!e){e=js.Web.HasOption(d);if(!e){e=a}var b=c.indexOf("?");if(b>=0){c+="&"+encodeURIComponent(d)+"="+e}else{c+="?"+encodeURIComponent(d)+"="+e}}}return c},GetQueryParams:function(b,d){var c=RegExp("[?&]"+b+"=([^&]*)");var a=c.exec(d||location.search);return a&&decodeURIComponent(a[1])},LoadScript:function(b,d){if(!b){return}var c=window.document.getElementsByTagName("head")[0];var a=document.createElement("script");a.type="text/javascript";a.src=b;if(d){a.callback=d;a.timeoutHandle=window.setTimeout(function(){if(a.callback){a.callback.call(a)}},4000,a);a.onload=a.onreadystatechange=function(){if(this.readyState=="loaded"&&this.callback){if(this.timeoutHandle){window.clearTimeout(this.timeoutHandle)}this.callback(this)}}}c.appendChild(a)},LoadStyle:function(b){if(!b){return}var c=window.document.getElementsByTagName("head")[0];var a=document.createElement("link");a.type="text/css";a.href=b;a.rel="stylesheet";c.appendChild(a)},HasOption:function(c,f,b){var e=f||location.search;var d=new RegExp("(?:^|[&?])"+c+"(?:[=]([^&]*))?(?:$|[&])","i");var a=d.exec(e);if(b){return a?(a[0]===undefined||a[0]===""?true:a[0]):false}return a?(a[1]===undefined||a[1]===""?false:a[1]):false},SetCookieValue:function(a,c){var b=30;var d=new Date();d.setTime(d.getTime()+b*24*60*60*1000);document.cookie=a+"="+escape(c)+";expires="+d.toGMTString()},DeleleCookie:function(a){var c=new Date();c.setTime(c.getTime()-1);var b=getCookie(a);if(b!=null){document.cookie=a+"="+b+";expires="+c.toGMTString()}},GetCookieValue:function(a){var d=document.cookie.split("; "),c=d.length,b,e;while(c--){b=d[c].split("=");if(b[0]===a){e=b[1]}}if(e&&e.indexOf("%u")>=0){return unescape(e)}return e},ShowMsg:function(c,l,j,m,g,k,d,h,n){l=l||"提示";k=k||"确定";d=d||"关闭";var b=true,a=$(".alert-dialog-main");if(!c){return}if(!js.IsString(c)){if(js.IsFunction(c)){c=c.call(n)}else{if(js.IsObject(c)&&c.error){c=c.error}else{c=c.toString()}}}if($.messager){$.extend($.messager.defaults,{ok:k,cancel:d});if(g==1||g==4){var e=$.messager.prompt(l,c,m);if(h&&e){$(".messager-input",e).val(h)}}else{if(g==2){$.messager.confirm(l,c,m)}else{$.messager.alert(l,c,null,m)}}}else{if(window.Ext&&window.Ext.MessageBox){var f={title:l,minWidth:window.Ext.MessageBox.minPromptWidth,msg:c,buttons:window.Ext.MessageBox.OKCANCEL,callback:null,scope:n||this,multiline:null,value:null};if(g==1||g==4){f.prompt=true;f.buttons=window.Ext.MessageBox.OKCANCEL;f.buttonText={ok:k,cancel:d};f.callback=function(o,p){if(o=="ok"){if(m){m(true,p)}}else{if(m){m(false,p)}}};window.Ext.MessageBox.prompt(f)}else{if(g==2){f.buttons=window.Ext.MessageBox.YESNO;f.buttonText={yes:k,no:d};f.callback=function(o){if(o=="yes"){if(m){m(true)}}else{if(m){m(false)}}};window.Ext.MessageBox.confirm(f)}else{if(g==3){}else{f.minWidth=window.Ext.MessageBox.minWidth;f.buttons=window.Ext.MessageBox.OK;f.fn=function(o){if(m){m(true)}};f.buttonText={ok:k};window.Ext.MessageBox.alert(f)}}}}else{if(g==1||g==4){b=prompt(c,h)}else{if(g==2){b=confirm(c)}else{if(g==3){}else{alert(c)}}}if(m){m(b)}}}},ShowAlertMsg:function(d,c,b,f,e,a){return js.Web.ShowMsg(d,c,b,f,0,e,null,null,a)},ShowConfirmMsg:function(e,d,b,g,f,c,a){return js.Web.ShowMsg(e,d,b,g,2,f,c,null,a)},ShowPromptMsg:function(f,e,c,h,g,d,a,b){return js.Web.ShowMsg(f,e,c,h,1,g,d,a,b)},ShowMultiLinePromptMsg:function(f,e,c,h,g,d,a,b){return js.Web.ShowMsg(f,e,c,h,4,g,d,a,b)},ShowErrorMsg:function(b,a,c,e,d){return js.Web.ShowMsg((a||"")+b,c,null,e,0,d)},AppendAjaxHeader:function(d,a,b){var c={"X-Requested-With":"XMLHttpRequest"};if(b!==false){c.sys_r=Math.round(Math.random()*10000)}if(typeof(d)=="string"){return js.Web.AppendUrlParams(d,c)}var c=js.Apply(c,d);return js.Web.RemoveExistsUrlComps(c,a)},FindWindow:function(c,b){if(b==null){var d=c.parent;while(window&&d&&d!=c){c=d;d=c.parent}}else{var a=window.frames[b];if(a!=null&&a.contentWindow){c=a.contentWindow}else{if(a!=null&&a==a.window){c=a}}}return c},FindForm:function(b){var a=b;var c;while(a){c=a.nodeName.toLowerCase();if(c=="form"||c=="window"){break}a=a.parentNode}if(a&&c=="form"){return a}return null},OpenUrlInMainFrame:function(c,f,e,b,g,a){var d=js.Init.GetMainFrame();if(d&&d.OpenUrl){return d.OpenUrl(c,f,e,b,g,a)}else{js.Web.OpenWindow(this,c)}},OpenWindow:function(d,c,g,j,a,b){var e=window.location.search;var f;if(a){f=c.indexOf("?");if(f>=0){c+="&"+e}else{c+="?"+e}}if(c){if(!js.IsString(c)){c=c.toString()}c=js.Web.AppendUrlCommonVars(c,false);if((!g||g=="_self")){js.UI.ShowLoadingMask("正在打开页面，请稍候")}else{js.UI.ShowLoadingMask("正在打开页面，请稍候",g=="_blank"?1000:5000)}try{window.open(c,g||"_self",j||"")}catch(h){js.UI.HideLoadingMask();js.Web.ShowAlertMsg("在当前浏览器下打开页面出错, 错误:"+h,true,true);window.open(c,"_blank",j||"")}}if(b){js.StopEvent(b)}},OpenFullSizeWindow:function(a){js.Web.OpenWindow(null,a,"_blank","")},OpenModalDialog:function(c,b,a){var d=new Object();d.name=b;window.showModalDialog(c,d,a)},OpenCustomSizeWindow:function(d,c,e){var b=screen.availWidth;var g=screen.availHeight;var a=(b-c)/2;var f=(g-e)/2;window.open("about:blank",d,"left="+a+", top="+f+", Width="+c+", height="+e+", resizable=yes, scrollbars=yes, status=yes, toolbar=no, menubar=no, location=no")},OpenPostWindow:function(c,e,b,a,f){var d=js.Web.CreatePostForm(e,null,c,b);d.submit();document.body.removeChild(d)},CreatePostForm:function(a,f,d,e){var c=document.createElement("form"),b=[];c.id=f||js.GenerateUnquieId(),c.method="post";c.action=d;c.target=e;addField=function(g,j){var h=document.createElement("input");var k=$(h).attr({type:"hidden",value:j,name:g});c.appendChild(h);b.push(h)};addFields=function(l,k){if(js.IsArray(l)){for(var h=0;h<l.length;h++){addFields(l[h],(k||"")+"["+h+"]")}}else{if(js.IsObject(l)&&!js.IsDate(l)&&!js.IsString(l)){for(var j in l){var g=l[j];if(!g||js.IsDate(g)||js.IsString(g)||js.IsNumber(g)||js.IsBoolean(g)){addField(k?k+"."+j:j,g)}else{if(js.IsArray(g)||js.IsObject(g)){addFields(g,(k?k+j:j))}}}}}};document.body.appendChild(c);addFields(a);return c},_AjaxSuccess:function(a,b){if(b){b(true,a)}},_AjaxFailure:function(a,b){if(b){b(false,a)}},_ChangePostUrl:function(b){if(!b){return null}b=js.Web.AppendUrlCommonVars(b,true);var a=b.match(/\?PageNumber\=[0-9]*/i);if(a!=null){b=b.replace(a[0],"?PageNumber=0")}else{a=b.match(/\&PageNumber\=[0-9]*/i);if(a!=null){b=b.replace(a[0],"&PageNumber=0")}}return b},CopyToExcel:function(h,t,e,m,k,l){var n=this,o=null,s=[],p="",a,b;if(!js.IsArray(h)){h=[h]}function g(A,j,w){var r=A,z=null;if(w&&w.xtype=="actioncolumn"){r=w.text}else{if(w&&w.renderer){z=w.renderer.call(n,r,w,j,-1,u,n.store,n)}}if(z){r=z}if(!r){return""}if(js.IsDate(r)){r=js.FormatDate(r,false)}else{r=r.toString()}var x="",y=false;for(var u=0;u<r.length;u++){if(r[u]=='"'){x+='""';y=true}else{if(r[u]=="\0"){}else{if(r[u]!="\r"){x+=r[u];y=true}}}}if(y){return'"'+x+'"'}return x}function f(v){o=[];if(!m){if(!v){return}v=v.data;for(var u in v){o.push({text:u,dataIndex:u})}return}if(js.IsArray(m)){for(var r=0;r<m.length;r++){if(!m[r].hidden){o.push(m[r])}}return}for(var u in m){var j=m[u];if(js.IsString(j)){o.push({text:j,dataIndex:u})}else{if(!j){o.push({text:u,dataIndex:u})}else{if(!j.dataIndex){j.dataIndex=u}if(!j.text){j.text=j.dataIndex}o.push(j)}}}}for(var d=0;d<h.length;d++){a=h[d];if(a){if(a.data&&a.get){a=a.data}if(!o){f(a);if(t){for(var c=0;c<o.length;c++){b=o[c].text;p+=(g(b,null,o[c])+"\t")}p+="\r\n"}}for(var c=0;c<o.length;c++){var q=(g(a[o[c].dataIndex],a,o[c])+"\t");p+=q}p+="\r\n"}}if(e&&p){js.Web.LastClipboardText=p}return p},ParseFromExcel:function(n,r){if(!n){return[]}var p=[],k=[],l,j=0,m="",q,a=0,d,g=[],o=false,f=[];function b(t){for(var s=0;s<t.length;s++){if(t[s]){return false}}return true}function h(u,t){for(var s=0;s<u.length;s++){if(u[s]&&u[s][t]){return false}}return true}if(n[n.length-1]!="\n"){n+="\n"}for(var e=0;e<n.length;e++){d=n.substr(e,1);if((d=="\t"||d=="\n")&&(a%2==0)){if(m.length>0&&m[m.length-1]=="\r"){m=m.substr(0,m.length-1)}g.push(m.trim());a=0;m="";o=false;if(d=="\n"){if(b(g)==false){if(g.length>j){j=g.length}p.push(g)}g=[]}}else{if(d=='"'&&o){a++;m+='"';o=false}else{if(d=='"'&&!o){a++;o=true}else{m+=d}}}}while(j>=0){if(h(p,j-1)==false){break}j--}for(var e=0;e<p.length;e++){p[e].length=j}if(!r||p.length<=0){g=[];for(var e=0;e<j;e++){g.push("F"+e)}var c=p.length;p.length=c+1;for(var e=c-1;e>=0;e--){p[e+1]=p[e]}p[0]=g}else{k=p[0];for(var e=0;e<k.length;e++){if(!k[e]){k[e]="F"+e}}}return p},AdjustUrlPath:function(a,b){if(!a){return null}if(a.startsWith("~/")){a=js.Sys.AppPath+"/"+a.substr(2)}else{if(a.startsWith("/")){a=js.Sys.AppPath+a}else{if(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ftp://")){}else{a=js.Sys.AppPath+a}}}a=a.replaceAll("//","/").replaceAll("//","/");return a},GenerateAbsoluteUrl:function(a,b){if(!a){return null}if(a.startsWith("~")){a=a.substring(1)}var c=js.Sys.AppPath+"/"+a;if(b){routeValues=js.CopyObject({lang:js.Web.HasOption("lang",null,false)||js.Sys.lang||"zh-CN",sys_v:js.Web.HasOption("sys_v",null,false)||js.Sys.sys_v,theme:js.Web.HasOption("theme",null,false)||js.DefaultTheme,sys_r:js.Sys.sys_r},routeValues,false);c=js.Web.EncodeUrl(routeValues,c).replace("?&","?")}c=c.replaceAll("//","/").replaceAll("//","/");return c},GenerateUrl:function(h,f,b,k,d,o,l,g,c,m,e){if(l){if(h!=null&&h.useModel){return h}return{controller:h,action:f,id:b,routeValues:k,routeName:d,path:o,useModel:true}}else{if(h!=null&&h.useModel){f=h.action;b=h.id;k=h.routeValues;d=h.routeName;o=h.path;h=h.controller}else{if(k){if(h==undefined){h=k.controller}if(f==undefined){f=k.action}if(b==undefined){b=k.id}if(d==undefined){d=k.routeName}if(o==undefined){o=k.path}}}}if(k){delete k.controller;delete k.action;delete k.id;delete k.routeName;delete k.path}h=h||js.Sys.ControllerName;f=f||js.Sys.ActionName;var n=js.Sys.AppPath;if(d){d=n+"/"+d}else{d=n}var a=d+"/"+h+"/"+f;if(o&&o.length>0){a=a+"/"+o}if(!e){k=js.CopyObject({lang:js.Web.HasOption("lang",null,false)||js.Sys.lang||"zh-CN",sys_v:js.Web.HasOption("sys_v",null,false)||js.Sys.sys_v,theme:js.Web.HasOption("theme",null,false)||js.DefaultTheme,_oc:js.Sys.ControllerName,_oa:js.Sys.ActionName,_usid:js.Sys.UserId,sys_r:js.Sys.sys_r},k,false)}else{if(js.IsObject(e)){k=js.CopyObject(k||{},e,false)}}if(!js.Sys.UserId){delete k._usid}if(b){k.id=b}if(c){if(js.IsString(c)){k.ReturnUrl=c}else{k.ReturnUrl=window.location.pathname+window.location.search}}else{if(!m){var j=js.Web.GetQueryParams("ReturnUrl",window.location.href);if(j&&!k.ReturnUrl){if(j.endsWith("#")){k.ReturnUrl=j.substr(0,j.length-1)}else{k.ReturnUrl=j}}}}if(g){k.IsListDirectly=true}a=js.Web.EncodeUrl(k,a).replace("?&","?");a=a.replaceAll("//","/").replaceAll("//","/").replace("/?","?");if(a.endsWith("#")){a=a.substr(0,a.length-1)}return a},IsBlankLink:function(b,a){if(!a){a=b.href}if(!a||a=="#"||a.indexOf("javascript:void(")>=0){return true}var d=/href\=\"([a-zA-Z0-9\#\?\:\/\_\=\&\;\%\-\.\(\)])*\"/i;var c=b.outerHTML.match(d);if(c==null||!c[1]||c[1]=="#"){return true}return false},FindForm:function(b){var a=b;var c;while(a){c=a.nodeName.toLowerCase();if(c=="form"||c=="window"){break}a=a.parentNode}if(a&&c=="form"){return a}return null},CopyHtmlContent:function(b){if(js.IsString(b)){b=document.getElementById(b)}if(b){var a=b.innerHTML;if(js.Web.SetClipboard(a)){js.Web.ShowMsg("INFO_ACTION_COPY_SUCCESS")}else{js.Web.ShowMsg("INFO_NOTSUPPORT_BROWSER")}}else{js.Web.ShowMsg("INFO_NOTFOUND_CONTENT!")}},AppendUrlParams:function(a,c,b){if(js.IsNull(b)){b=true}return js.Web.EncodeUrl(c,a,null,null,null,b)},RemoveExistsUrlComps:function(f,c){if(!c||!f){return f}var a=["sys_v","sys_r","lang","theme","orignal_controller","orignal_action","_oc","_oa","_usid"],b=null,e=null,g=null;for(var d=0;d<a.length;d++){b=a[d];e=RegExp("[?&]"+b+"=([^&]*)");g=e.exec(c);if(g){delete f[b]}}return f},GetUrlParmas:function(b){if(!b||b==""){return{}}if(b.indexOf("?")>=0){b=b.substr(b.indexOf("?")+1)}var e={};var a=b.split("&");for(var c=0;c<a.length;c++){if(a[c].indexOf("=")<=0){continue}var d=a[c].split("=");e[d[0]]=d[1]}return e},EncodeUrl:function(a,f,m,p,k,d){if(!a){return f}if(f&&!p){a=js.Web.RemoveExistsUrlComps(a,f)}var g,b=[],h=encodeURIComponent,c;m=m||"";if(!p){p=0}if(!k){k=4}try{js.Iterate(a,function(o,q){g=js.IsEmpty(q);if(typeof(q)=="string"&&q.length<=0){g=false}if(js.IsArray(q)){if(!d){for(var e=0;e<q.length;e++){c=q[e];if(typeof(c)=="object"&&js.IsDate(c)==false&&p<k){b.push("&",js.Web.EncodeUrl(c,"",m+o+"["+e+"].",p+1,k))}else{b.push("&",h(m+o),"=",(!js.IsEmpty(c)&&(c!=o||!g))?(js.IsDate(c)?c.encode().replace(/"/g,""):h(c)):"")}}}else{for(var e=0;e<q.length;e++){c=q[e];if(typeof(c)=="string"||typeof(c)=="boolean"||typeof(c)=="number"){b.push("&",m+o+"["+e+"].","=",h(c))}else{if(js.IsDate(c)){b.push("&",m+o+"["+e+"].","=",c.encode().replace(/"/g,""))}}}}}else{if(q===null){}else{js.Each(g?o:q,function(r){if(d){if(typeof(r)=="string"||typeof(r)=="boolean"||typeof(r)=="number"){b.push("&",h(m+o),"=",h(r))}else{if(js.IsDate(r)){b.push("&",h(m+o),"=",r.encode().replace(/"/g,""))}}}else{if(typeof(r)=="object"&&js.IsDate(r)==false&&p<k){b.push("&",js.Web.EncodeUrl(r,"",m+o+".",p+1,k))}else{b.push("&",h(m+o),"=",(!js.IsEmpty(r)&&(r!=o||!g))?(js.IsDate(r)?r.encode().replace(/"/g,""):h(r)):"")}}})}}});if(!f){b.shift();f=""}}catch(j){js.Web.ShowMsg(j,"错误",null,null,0)}var l=f.indexOf("?");var n=null;if(l>=0){if(f[f.length-1]=="&"){n=f.substr(0,f.length-1)+b.join("")}else{n=f+b.join("")}}else{if(f){n=f+"?"+b.join("")}else{n=f+b.join("")}}n=n.replace("?&","?").replace("//","/");if(n.startsWith("http:/")){n=n.replace("http:/","http://")}return n},jQueryParamFunction:function(b,c){return js.Web.EncodeUrl(b,null,null,null,null,false)},AttachWithSpecialFunction:function(e,a,d,c){a=js.Each(a,function(g){return g},this,true,false);var f;for(var b=0;b<a.length;b++){f=a[b];if(d&&!f.hasListener("specialkey")){f.addListener("specialkey",function(h,g){if(g.getKey()==Ext.EventObject.ENTER){if(d==true&&e.loadCall){e.loadCall.call(c||e,e)}else{if(typeof(d)=="function"){d.call(c||e,e,h,g)}}}})}}},CreateTooltipIcon:function(c,e,d,a,h,g,f){if(!c&&!e){return""}var b="javascript:js.Web._AjaxTooltipRenderClicked.call(this)";f=f||{};if(a){f.height=a}if(d){f.width=d}if(h){f.title=h}if(g){f.target=g}if(js.IsFunction(c)){f=f||{};f.url_id=js.GenerateUnquieId();js.Functions[f.url_id]=c;c="#"}else{if(f.target&&f.target!="_self"){b=null}}if(!b){return String.format('<a class="renderer-href renderer-help-link icon icon-help" href="{0}" title="{1}" target="{2}"></span>',c,e,f.target)}return String.format('<span class="renderer-href renderer-help-link icon icon-help" url="{0}" title="{1}" data-configs=\'{2}\' onclick="'+b+'"></span>',c,e,js.ToJsonString(f,true))},_AjaxTooltipRenderWindow:null,_AjaxTooltipRenderClicked:function(){var jsMe=js.Renderer,me=this,jthis=$(this),tooltip=jthis.attr("title"),url=jthis.attr("url"),tconfigs=jthis.attr("data-configs"),configs=null;try{configs=eval("("+tconfigs+")")}catch(error){}if(!configs){configs={}}var width=Number(configs.width)||600,height=Number(configs.height)||400,title=configs.title||"查看详细提示";if(!jsMe._AjaxTooltipRenderWindow){var loadingImgSrc=js.Web.GenerateAbsoluteUrl("Content/images/Info_LoadingBig.gif"),innerHtml='<div class="ajax-tooltip-container"><img class="ajax-tooltip-loading" src="'+loadingImgSrc+'"/><div class="ajax-tooltip-body"></div></div>';if(window.Ext){jsMe._AjaxTooltipRenderWindow=new Ext.WindowEx({width:600,height:400,title:"查看详细提示",html:innerHtml,autoScroll:true,background:"white"})}else{js.Web.ShowAlertMsg("对不起，暂时不支持!");return}}if(configs.element&&window.Ext){configs.element=Ext.getCmp(configs.element)}if(url=="#"&&configs.url_id){url=js.Functions[configs.url_id];if(url){url=url.call(configs.element||this)}}if(url=="#"){url=null}if(!url&&!tooltip){js.Web.ShowAlertMsg("没有可用的详细提示信息");return}if(configs.target&&configs.target!="_self"){js.Web.OpenWindow(this,url,configs.target);return}if(window.Ext){jsMe._AjaxTooltipRenderWindow.setWidth(width);jsMe._AjaxTooltipRenderWindow.setHeight(height);jsMe._AjaxTooltipRenderWindow.setTitle(title)}if(!url&&js.Init.TooltipElement&&!configs.width){js.Init.TooltipElement.update(tooltip);var pos=jthis.offset();js.Init.TooltipElement.showAt([pos.left+20,pos.top+20]);return}jsMe._AjaxTooltipRenderWindow.show();jsMe._AjaxTooltipRenderWindow.center();var ajaxTooltipContainer=$("div.ajax-tooltip-container"),ajaxTooltipLoadingImage=ajaxTooltipContainer.find("img.ajax-tooltip-loading"),ajaxTooltipBody=ajaxTooltipContainer.find("div.ajax-tooltip-body");if(url){ajaxTooltipBody.removeClass("content-local");ajaxTooltipLoadingImage.show();ajaxTooltipBody.hide();ajaxTooltipBody.load(url,function(){ajaxTooltipBody.show();ajaxTooltipLoadingImage.hide()})}else{ajaxTooltipBody.addClass("content-local");ajaxTooltipLoadingImage.hide();ajaxTooltipBody.html(tooltip)}}};if(window.jQuery){window.jQuery.param=js.Web.jQueryParamFunction}if(!String.prototype.replaceAll){String.prototype.replaceAll=function(b,a){return this.replace(new RegExp(b,"gm"),a)}}if(!String.format){String.format=function(g,f,e){var m="";for(var b=0;;){var c=g.indexOf("{",b);var k=g.indexOf("}",b);if((c<0)&&(k<0)){m+=g.slice(b);break}if((k>0)&&((k<c)||(c<0))){if(g.charAt(k+1)!=="}"){throw"format格式不匹配"}m+=g.slice(b,k+1);b=k+2;continue}m+=g.slice(b,c);b=c+1;if(g.charAt(b)==="{"){m+="{";b++;continue}if(k<0){throw"format格式不匹配"}var l=g.substring(b,k);var d=l.indexOf(":");var h=parseInt((d<0)?l:l.substring(0,d),10)+1;if(isNaN(h)){throw Error.argument("format",Sys.Res.stringFormatInvalid)}var a=(d<0)?"":l.substring(d+1);var j=f[h];if(typeof(j)==="undefined"||j===null){j=""}if(j.toFormattedString){m+=j.toFormattedString(a)}else{if(e&&j.localeFormat){m+=j.localeFormat(a)}else{if(j.format){m+=j.format(a)}else{m+=j.toString()}}}b=k+1}return m}}js.Apply(Date,{parseFunctions:{"M$":function(b,a){var c=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/");var d=(b||"").match(c);return d?new Date(((d[1]||"")+d[2])*1):null},CN:function(b,a){var c=new RegExp("(\\d+)-(\\d+)-(\\d+)");var d=(b||"").match(c);if(!d){return null}return new Date(d[1],(d[2]||1)-1,d[3]||1)}},formatFunctions:{"M$":function(a){if(js.IsNull(a)&&this.getTime){a=this.getTime()}return"\\/Date("+a+")\\/"},CN:function(c){var b=new Date(c),f=b.getFullYear(),a=b.getMonth()+1,e=b.getDate();if(a<10){a="0"+a}if(e<10){e="0"+e}return f+"-"+a+"-"+e}},formatJsDateTime:function(b){if(!b||!b.getTime){return""}var a=b.getTime();return"\\/Date("+a+")\\/"},parseDate:function(b,d,a){var c=Date.parseFunctions;if(c[d]==null){Date.createParser(d)}return c[d](b,true)},parse:function(b){if(!b){return null}if(!(b instanceof Date)){if(!isNaN(b)){if(b<3000){return new Date(b,0,1)}if(b<10000000000){return new Date(b*1000)}}var c=null;if(b.indexOf("T")>=0){var a=b.replace("T"," ").replace("-","/").replace("-","/");var d=a.lastIndexOf(".");if(d>=0){a=a.substr(0,d)}c=js.Orignal.Date.parse(a);if(!c){c=js.Orignal.Date.parse(b)}}else{c=js.Orignal.Date.parse(b)}if(!isNaN(c)){return new Date(c)}if(!(c instanceof Date)){c=Date.parseDate(b,"M$")}if(!(c instanceof Date)){c=Date.parseDate(b,"CN")}b=c}return b}});js.Apply(Date.prototype,{addDays:function(e,d){var b=this;var c=Number(b.valueOf());c+=e*24*3600*1000;var a=new Date(c);if(!d){a=a.clearTime()}return a},clearTime:function(){return this},addMonths:function(a){var c=this;var b=new Date(c.getTime());b.setDate(1);b.setMonth(b.getMonth()+a);return b},getDateWithoutTime:function(a){a=a||this;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},isLeapYear:function(){var a=this.getFullYear();if(a%400==0||(a%100!=0&&a%4==0)){return true}return false},getDaysOfYear:function(){var d=this.getDate()-1;var c=this.getMonth();for(var a=0;a<c;a++){d+=js.Sys.DaysOfMonth[a]}var b=this.getFullYear();if(c>1&&(b%400==0||(b%100!=0&&b%4==0))){d++}return d},getTotalDays:function(){var a=this.valueOf();return a/1000/3600/24},encode:function(b){b=b||this;function a(c){return js.PadNumber(c,2)}return""+b.getFullYear()+"-"+a(b.getMonth()+1)+"-"+a(b.getDate())+"T"+a(b.getHours())+":"+a(b.getMinutes())+":"+a(b.getSeconds())+""},toUTCDate:function(){var a=this;return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())},toLocalDate:function(){var a=this;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())}});js.Init={Tooltips:null,IsJQueryFunctionStored:false,_JQueryFunctions:{},StoreJQueryFunctions:function(){js.Apply(js.Init._JQueryFunctions,jQuery.fn)},DisableBackspace:function(h){var d=h||window.event,g=d.target||d.srcElement,c=g.type||g.getAttribute("type"),f=g.getAttribute("readonly"),j=g.getAttribute("enabled");f=(f==null)?false:f;j=(j==null)?true:j;var b=(d.keyCode==8&&(c=="password"||c=="text"||c=="textarea")&&(f||!j))?true:false;var a=(d.keyCode==8&&c!="password"&&c!="text"&&c!="textarea")?true:false;if(a){return false}if(b){return false}},RestoreJQueryFunctions:function(){js.Init.IsJQueryFunctionStored=true;for(var a in js.Init._JQueryFunctions){jQuery.fn["jQuery_"+a]=js.Init._JQueryFunctions[a]}},GetMainFrame:function(){var a=window.parent;var b=window;while(b.js&&!b.js.MF&&a!=b&&a){b=a}if(b.js&&b.js.MF){return b.js.MF}b=window;a=window.parent;while(b.js&&b.js.EUI&&!b.js.EUI.MF&&a!=b&&a){b=a}if(!b||!b.js||!b.js.EUI){return null}return b.js.EUI.MF},PageLoaded:function(){},InitVariables:function(){js.Server=window.Server;js.Apply(js.Sys,js.Server);js.Init.InitGlobalParams(js.Sys.GlobalParams,null,null,true);var a=$("div.template");a.each(function(c,e){var d=$(e),b=d.attr("name"),f=e.innerHTML;if(b){js.HtmlTemplate[b]=f}})},_OWidth:null,_OHeight:null,_PageSizeHandler:null,_PageSizeHandlers:[],_PageSized:function(e){var d=$(window).width(),a=$(window).height();if(Math.abs(js.Init._OWidth-d)<=2&&Math.abs(js.Init._OHeight-a)<=2){return}js.Init._OWidth=d;js.Init._OHeight=a;for(var c=0;c<js.Init._PageSizeHandlers.length;c++){try{js.Init._PageSizeHandlers[c](e)}catch(b){}}},RegisterPageSizeHandler:function(b){if(typeof(b)!="function"){return}for(var a=0;a<js.Init._PageSizeHandlers.length;a++){if(js.Init._PageSizeHandlers[a]==b){return}}js.Init._PageSizeHandlers.push(b)},RemoveLocalProperties:function(e,a){if(!e){return e}for(var d in e){var c=e[d];if(d.startsWith("__")||(a&&d.endsWith("_DisplayString"))){delete e[d]}else{if(js.IsArray(c)){for(var b=0;b<c.length;b++){js.Init.RemoveLocalProperties(c[b],a)}}else{if(js.IsObject(c)&&!js.IsString(c)&&!js.IsFunction(c)){js.Init.RemoveLocalProperties(c,a)}}}}return e},InitGlobalParams:function(g,e,a,f){if(g==null){return null}if(!e){e=5}if(!a){a=0}if(a>e||g.__IsGlobalParamsInited){return g}var d;for(var c in g){if(c.startsWith("__")){continue}d=g[c];if(d){if(d.$values&&js.IsArray(d.$values)){d=d.$values;g[c]=d}if(c=="QueryParams"||c=="UserData"){js.Init.InitGlobalParams(d,e,a+1,false);continue}if(typeof(d)=="object"&&d.year&&d.month&&d.timeOfTicks){g[c]=new Date(d.year,d.month,d.date,d.hours,d.minutes,d.seconds,d.ms)}else{if(typeof(d)=="string"&&d.startsWith("/Date")){g[c]=Date.parse(d)}else{if(typeof(d)=="string"&&d.indexOf("T")>0&&d.length>=10&&(c.endsWith("_date")||c.endsWith("_rq")||c.endsWith("_sj")||c.endsWith("_time"))){g[c]=Date.parse(d)}else{if(js.IsArray(d)){for(var b=0;b<d.length;b++){if(d[b]){d[b]=js.Init.InitGlobalParams(d[b],e,a+1,f)}}}else{if(typeof(d)=="object"){js.Init.InitGlobalParams(d,e,a+1,f)}}}}}}if(f){g["__"+c.toLowerCase()]=g[c]}}g.__IsGlobalParamsInited=true;return g},ShowRenderTimeCost:function(){var b=new Date(),a=b-js.Sys.ClientTimeStamp;var c=document.getElementById("system-msg-tip");if(c){c.innerHTML+=a+"(ms), "}}};js.Math={IntDiv:function(d,c){return Math.floor(d/c)},Round:function(a,b){if(isNaN(a)==false&&a==0){return 0}if(!a||isNaN(a)){return null}return Number(Number(a).toFixed(b))},RoundTo10K:function(a,b){return js.Math.Round(a/10000,b)},RoundTo100M:function(a,b){return js.Math.Round(a/100000000,b)},ToPercent:function(c,a,d){if(js.IsNull(d)){d=2}a=Number(a);if(isNaN(a)){return 0}c=Number(c);if(isNaN(c)){return 0}if(a==0){return 0}var b=(c*100)/a;return Number(b.toFixed(d))},Sort:function(h,a,g){if(!h&&!h.length){return h}var f=0,c,b;for(var e=0;e<h.length-1;e++){f=e;c=h[e];if(c){for(var d=e+1;d<h.length;d++){b=h[d];if(b==null){f=d;break}if((!a&&c>b)||(a&&a.call(g||this,c,b)>0)){f=d;c=b}}if(f!=e){c=h[e];h[e]=h[f];h[f]=c}}}return h},SortArray:function(c,a,b){return js.Math.Sort(c,function(f,e){var d=f[a],g=e[a];if(b){return js.Math.Compare(g,d)}return js.Math.Compare(d,g)})},Compare:function(d,c){if(d==null){if(c==null){return 0}else{return -1}}else{if(c==null){return 1}else{if(d<c){return -1}else{if(d==c){return 0}else{return 1}}}}},GetComparedResult:function(h,g,j,f,c){c=c||0;var l={};if(h&&!g){js.CopyObject(h,l,true,null,f)}else{if(!h&&g){js.CopyObject(g,l,true,null,f)}else{for(var k in h){if(f[k]){continue}var e=h[k],d=g[k];if(js.IsFunction(e)){continue}if(e&&!d){l[k]=e;continue}else{if(!e&&d){l[k]=d;continue}}if(js.IsObject(e)){if(c<j-1){l[k]=js.Math.GetComparedResult(e,d,j,f,c+1)}continue}else{if(js.IsArray(e)){}else{if(e!=d){l[k]=d}continue}}}}}},ResolveNameCardNo:function(d){if(d&&d.trim){d=d.trim()}if(d&&d.length>18){var a=d.length,e="",c;for(var b=0;b<a;b++){c=d.substr(b,1);if(c>="0"&&c<="9"){e+=c}else{if(c=="x"||c=="X"){e+="X"}}if(e.length>=18){break}}d=e}return d},NameCardArea:{11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},NameCardCheckSum:[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],IsValidNameCard:function(a,b){var c=js.Math.GetNameCardInfo(a);if(c.success){return true}if(!b&&c.msg){js.Web.ShowAlertMsg(c.msg)}return false},GetNameCardInfo:function(q){var r={success:false,msg:"输入身份证号码格式不正确!",gendar:true,birthday:null,provinceCode:null,provinceName:null};if(!q){r.msg="输入身份证号码不能为空!";return r}var l=q.length,c=new Date();if(l!=15&&l!=18){return r}var b=js.Math.NameCardArea,k=parseInt(q.substr(0,2)),h=b[k],j=null,p=null,o=null;if(!h){return r}if(l==15){j="19"+q.substr(6,2);p=q.substr(8,2);o=q.substr(10,2)}else{j=q.substr(6,4);p=q.substr(10,2);o=q.substr(12,2)}j=parseInt(j);p=parseInt(p);o=parseInt(o);if(isNaN(j)||isNaN(p)||isNaN(o)){return r}if(p==1||p==3||p==5||p==7||p==8||p==10||p==12){if(o>31){return r}}else{if(p==4||p==6||p==9||p==11){if(o>30){return r}}else{if(p==2){if((j%4==0&&j%100!=0)||j%400==0){if(o>29){return r}}else{if(o>28){return r}}}else{return r}}}try{r.birthday=new Date(j,p-1,o)}catch(m){return r}if(r.birthday.valueOf()>=c.valueOf()){return r}r.provinceCode=k;r.provinceName=h;var f=q.charAt(l-1);if(l==15){pattern=/^\d{15}$/;if(pattern.exec(q)==null){return r}if((f-"0")%2==0){r.gendar=false}else{r.gendar=true}r.success=true;r.msg=null;return r}if(f!="x"&&f!="X"){pattern=/^\d{18}$/;if(pattern.exec(q)==null){return r}}var d=js.Math.NameCardCheckSum,g=0,n=0,a=0;for(i=0;i<17;++i){f=q.charAt(i);if(f<"0"||f>"9"){return r}else{n=f-"0"}g+=n*d[i]}f=q.charAt(l-1);if(f=="X"||f=="x"){g+=10*d[17]}else{if(f<"0"||f>"9"){return r}else{g+=(q.charAt(17)-"0")*d[17]}}if((g%11)==1){f=q.charAt(l-2);if((f-"0")%2==0){r.gendar=false}else{r.gendar=true}r.success=true;r.msg=null;return r}else{return r}}};js.UI={_Trace:{},_LoadingMaskHandler:null,ShowLoadingMask:function(d,c){try{d=d||"请稍候...";var a=js.UI._LoadingMaskHandler;if(!a){if($.messager){a=$.messager.progress({title:d,interval:1000})}else{if(window.Ext){a=new window.Ext.LoadMask({target:document.body,msg:d})}else{if(document.getElementById("msg-loading")){a=$("#msg-loading")}}}js.UI._LoadingMaskHandler=a}if(!a){return}if(a.update){a.update(d)}else{if(a.find){a.find(".content").html(d)}}if(a.show){a.show()}if(c>0){window.setTimeout(function(){js.UI.HideLoadingMask()},c)}}catch(b){}},HideLoadingMask:function(){var a=js.UI._LoadingMaskHandler;if($){$("#msg-loading").hide()}if($.messager){$.messager.progress("close");js.UI._LoadingMaskHandler=null}if(!a){return}if(a.hide){a.hide()}},ShowTraceUIText:function(){var b="";for(var a in js.UI._Trace){b+=a+", "}js.Web.ShowMsg(b)},Resources:[],RegisterResource:function(b){if(b){function a(f){for(var c in f){var d=c.toLocaleUpperCase();if(d!=c){var e=f[c];f[d]=e;if(typeof(e)=="object"){a(e)}}}}a(b);this.Resources.push(b)}return b},ToAdjustedHtmlText:function(b){if(!b){return b}var c=b.toString(),a=c.length},GenerateSpanText:function(g,b,a,f,e,d){if(js.IsNull(g)){return""}if(g&&g.startsWith&&g.startsWith("<span style=")){return g}var c="";e=e||g||"";if(f){if(g.endsWith('<span style="color:red;">*</span>')==false){g=g+'<span style="color:red;">*</span>'}}else{if(a==null){a="black"}}if(a){c+="color: "+a+";"}if(b!=null&&b>0){c+="font-size : "+b+"px;"}if(d>0){c+="width : "+d+"px;"}return'<span style="'+c+'" title="'+e+'">'+g+"</span>"},GenerateDefaultIconClass:function(b,a){if(b){return"icon-baseinfo icon-"+b.toLowerCase()}if(a){a}return"icon-baseinfo icon-action"},UIText2:function(c,a,b){return js.UI.UIText(c,null,b,a)},UIText:function(j,f,d,a){if(!j){return j}var k=null,e=j.length,c=0,b,h="INFO_"+j;if(e>5){if(j.endsWith("_text")){h=j.substr(0,e-5)}else{if(e>6&&j.endsWith("_range")){h=j.substr(0,e-6)}}}a=a||this;f=f||a.className;if(f){}f=f||"VGResource";if(f){for(c=0;c<js.UI.Resources.length;c++){b=js.UI.Resources[c];if(b[f]&&b[f][j]){return b[f][j]}if(f!="VGResource"&&b.VGResource&&b.VGResource[j]){return b.VGResource[j]}if(b[f]&&b[f][h]){return b[f][h]}if(f!="VGResource"&&b.VGResource&&b.VGResource[h]){return b.VGResource[h]}}}for(c=js.UI.Resources.length-1;c>=0;c--){b=js.UI.Resources[c];if(b[j]){return b[j]}}if(js.Sys.Debug){var g=js.Web.FindWindow(window,null);g.js.UI._Trace[j]=j}if(d){return null}return j},TruncateString:function(b,a,c){if(!b){return b}c=c||"...";b=b.toString();if(b.length<a){return b}return b.substr(0,a)+c},FilterDataRow:function(l,d,f,a,k,h){if(!l){return false}if(!d){return true}var j=null,g=null,e=d.toUpperCase(),c=l.__UpperText,b=l.__PinyinText;if(a){j=l[a]}if(k){g=l[k]}if(d==g){return true}if(!j){return false}if(!c){c=j.toUpperCase();l.__UpperText=c}else{c=j.toUpperCase()}if(h&&e!=c){return false}if(!b&&js.UI.PinYin){b=js.UI.PinYin.CC2PY(c,false).toUpperCase();l.__PinyinText=b}if(!f){f=e}if(c.indexOf(e)>=0){return true}if(b&&f){return b.indexOf(f)>=0}return false}};js.UI.GenerateButtonText=js.UI.GenerateSpanText;js.VTypes={mobile:function(a){return js.IsMobilePhone(a)},mobileText:"不是有效的手机号码",email:function(a){return js.IsEmail(a)},emailText:"不是有效的邮箱信息",IPAddress:/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IPAddressText:"必须是有效的IP地址",IPAddressMask:/[\d\.]/i,NameCard:function(a,b){a=js.Math.ResolveNameCardNo(a);if(a){return js.Math.IsValidNameCard(a,true)}return false},NameCardText:"不是有效的身份证号码",NameCardMask:/[\d]*[\d\X]/i};js.Editor={text:function(b,c,a){b=b||{};b.container=a;if(js.IsNull(c)==false){b.required=c}return{type:"text",options:b,container:a}},checkbox:function(b,c,a){b=b||{};b.container=a;if(js.IsNull(c)==false){b.required=c}return{type:"checkbox",options:b,container:a}},combobox:function(e,g,c,d,a,f,b){e=e||{};e.required=g;e.textField=c||"DisplayString";e.valueField=d||"Key";e.relatedTextColumn=f;e.container=b;if(typeof(a)=="string"){e.url=a}else{e.data=a}return{type:"combobox",options:e,container:b}},combotree:function(b,c,a){b=b||{};b.container=a;if(js.IsNull(c)==false){b.required=c}return{type:"combotree",options:b,container:a}},datebox:function(b,c,a){b=b||{};b.container=a;if(js.IsNull(c)==false){b.required=c}return{type:"datebox",options:b,container:a}},numberbox:function(c,d,b,a){c=c||{};c.container=a;if(js.IsNull(d)==false){c.required=d}if(js.IsNull(b)==false){c.precision=b}return{type:"numberbox",options:c,container:a}},textarea:function(b,c,a){b=b||{};b.container=a;if(js.IsNull(c)==false){b.required=c}return{type:"textarea",options:b,container:a}},validatebox:function(b,c,a){b=b||{};b.container=a;if(js.IsNull(c)==false){b.required=c}return{type:"validatebox",options:b,container:a}}};js.Renderer={MultiRenderer:function(j,m,f,h,l,k,n){var c=m.column||m,b=c.renderers,a=c.name||c.dataIndex,g=a+"_DisplayString",e=f?(f.data||f):j;if(!b){return j}if(!js.IsArray(b)){b=[b]}for(var d=0;d<b.length;d++){j=b[d].call(n||this,j,m,f,h,l,k,n)}return j},TemplateRenderer:function(e,j,c,d,g,f,k){var b=j.column||j,a=b.name||b.dataIndex,h=b.template||b.category||a;if(c){return js.FormatObjectWithTemplate(h,c.data||c,false)}return e},CacheRenderer:function(g,k,d,f,j,h,l){var b=k.column||k,a=b.name||b.dataIndex,e=a+"_DisplayString",c=d?(d.data||d):g;if(!c){return g}return c[e]||g},ForeignKeyRenderer:function(j,m,f,h,l,k,n){var c=m.column||m,a=c.name||c.dataIndex,g=a,e=f?(f.data||f):j;if(!e||!a){return j}var d=e[g+"_DisplayString"];if(d){return d}d=e[g+"_MC"];if(d){return d}d=e[g+"_name"];if(d){return d}d=e[g+"_NAME"];if(d){return d}var b=a.lastIndexOf("_");if(b<0){return j}g=a.substr(0,b);d=e[g+"_DisplayString"];if(d){return d}d=e[g+"_MC"];if(d){return d}d=e[g+"_name"];if(d){return d}d=e[g+"_NAME"];if(d){return d}return j},HeaderRenderer:function(e,h,c,d,g,f,j){var b=h.column||h,a=b.name||b.dataIndex;if(e){return b.displayText||b.text}return null},GendarRenderer:function(g,k,d,f,j,h,l){var b=k?(k.column||k):null,a=b?(b.name||b.dataIndex):null,e=a?(a+"_DisplayString"):null,c=d?(d.data||d):g;if(!c){return"女"}if((e&&c[e])||g){return"男"}else{return"女"}},FormaterConverter:function(b,a,c){if(this.renderer){return this.renderer(b,this,a,c,this.colIndex,null,this.container)}return b},EncryptRenderer:function(e,f,a,g,c,b,d){if(!e){return e}if(js.Md5){return js.Md5(e).toUpperCase()}return e},HrefRenderer:function(g,k,d,f,j,h,l){if(!g){return null}l=l||this;d=d?(d.data||d):{};k=k||{};var c=k.column||k;var e=c.urlField,m=c.tooltip||g,b=d[m]||d.tooltip||m,a=d[e]||"#";return String.format('<a class="renderer-href"  href="{0}" style="text-decoration:underline" title="{1}">{2}</a>',a,b,g)},ActionLinkRenderer:function(h,m,e,g,k,j,n){if(!h){return null}n=n||this;e=e||{};var d=m.column||m,b=d.name||d.dataIndex,l=d.displayText||d.text,a=d.url,o=d.tooltip||h,c=e.tooltip||o,f=d.target||"_self";if(js.IsFunction(a)){a=a(h,m,e,g,k,j,n)}else{a=String.format(a,h,g)}return String.format('<a class="renderer-href renderer-action-link" href="{0}" target="{3}" style="text-decoration:underline" title="{1}">{2}</a>',a,c,l,f)},GridButtonRender:function(f,j,c,e,h,g,k){k=k||this;var d=null,a=j.column||j;if(a&&a.displayText&&typeof(a.displayText)=="function"){d=a.displayText(f,j,c,e,h,g,k);if(!d){return null}}else{d=a.displayText||f}var b=(a._container?a._container.id:null)||k.el.id||k.el.attr("id");if(window.Ext){return'<span class="ext-grid-button">'+d+"</span>"}return'<a  class="renderer-grid-button"  href="#" onclick="js.Controls.EUIContentClicked(\''+b+"', '_CellClicked',["+e+","+h+'])">'+d+"</a>"},ButtonRender:function(f,j,b,e,h,g,k){var d=null;if(j){j=j.column||j}if(j&&j.displayText&&typeof(j.displayText)=="function"){d=j.displayText(f,j,b,e,h,g,k);if(!d){return null}}else{d=j.displayText||f}var a=j.url;if(typeof(a)=="function"){a=a(f,j,b,e,h,g,k)}else{if(a){a=js.Web.AppendUrlParams(a,b)}}a=js.Web.AppendUrlCommonVars(a);var c=j.target||"_self";if(d&&a){return'<a href="'+a+'" class="eui-button eui-button_75 renderer-button" alt="" target="'+c+'"><SPAN class="l-btn-left"><SPAN class="l-btn-text">'+d+"</SPAN></SPAN></a>"}return null},DaysInWeekRender:function(e,f,a,g,c,b,d){if(e===0||!isNaN(e)){e=Math.round(e);if(e<0||e>6){e=0}if(e==0){return"周日"}if(e==1){return"周一"}if(e==2){return"周二"}if(e==3){return"周三"}if(e==4){return"周四"}if(e==5){return"周五"}if(e==6){return"周六"}}return e},FileSizeRender:function(e,f,a,g,c,b,d){if(e===0||!isNaN(e)){e=Number(e);if(e<1024){return e+"B"}else{if(e<1024*1024){return js.Math.Round(e/1024,1)+"K"}else{if(e<1024*1024*1024){return js.Math.Round(e/1024/1024,2)+"M"}else{return js.Math.Round(e/1024/1024/1024,2)+"G"}}}}return e},FriendlyDateTimeRender:function(j,m,d,f,l,k,n){if(!j){return null}var e=Date.parse(j);if(!e){return null}var a=new Date(),b=a.valueOf()-e.valueOf();var h=js.Math.IntDiv(b,1000);if(h<0){if(h>-3){return"马上"}if(h>-60){return h+"秒后"}var c=js.Math.IntDiv(h,60);if(c>-60){return c+"分钟后"}var g=js.Math.IntDiv(c,60);if(g>-24){return g+"小时后"}if(n&&!n.includeTimeIfOverDays){return js.Math.IntDiv(g,24)+"天后"}}else{if(b.TotalSeconds<3){return"刚刚"}if(h<60){return h+"秒前"}var c=js.Math.IntDiv(h,60);if(c<60){return c+"分钟前"}var g=js.Math.IntDiv(c,60);if(g<24){return g+"小时前"}if(n&&!n.includeTimeIfOverDays){return js.Math.IntDiv(g,24)+"天前"}}return js.Renderer.DateTimeRender(j,m,d,f,l,k,n)},TimeSizeRender:function(f,g,a,h,c,b,e){if(f){var d=null;if(!isNaN(f)){if(f<1000){return f+"毫秒"}else{if(f<60000){return js.Math.Round(f/1000,1)+"秒"}}f=f/1000;if(f<3600){return js.Math.Round(f/60,0)+"分"+js.Math.Round(f%60,0)+"秒"}f=f/60;if(f<24*60){return js.Math.Round(f/60,0)+"小时"+js.Math.Round(f%60,0)+"分"}d=new Date(0,0,0,0,0,0,f)}else{d=Date.parse(f)}if(d){if(d.getDay()>0){return"第"+(d.getDay()+1)+"天 "+d.format(js.Sys.TimeSpanFormatString)}return d.format(js.Sys.TimeSpanFormatString)}}return f},TimeSpanRender:function(f,g,a,h,c,b,e){if(f){var d=null;if(!isNaN(f)){d=new Date(0,0,0,0,f)}else{d=Date.parse(f)}if(d){if(d.getDay()>0){return"第"+(d.getDay()+1)+"天 "+d.format(js.Sys.TimeSpanFormatString)}return d.format(js.Sys.TimeSpanFormatString)}}return f},BooleanRender:function(e,h,a,c,g,f,j){h=h||{};var b=h.trueString===null||h.trueString===undefined?js.UI.UIText("Info_True"):h.trueString;var d=h.falseString===null||h.falseString===undefined?null:h.falseString;if(e&&e!=0){return b}else{return d}},NullableBooleanRender:function(e,h,a,c,g,f,j){var b=h.trueString===null||h.trueString===undefined?js.UI.UIText("Info_True"):h.trueString;var d=h.falseString===null||h.falseString===undefined?js.UI.UIText("Info_False"):h.falseString;if(e&&e!=0){return b}else{if(e!==null){return d}}return null},DateTimeRender:function(c,g,a,b,e,d,h){if(c){var j=null;if(!isNaN(c)){if(c<10000000000){c=c*1000}j=new Date(c)}else{j=Date.parse(c)}if(j){if(j.format){var f=null;if($.Metro){f=j.format("yyyy-mm-dd HH:MM:ss")}else{f=j.format(js.Sys.DateTimeFormatString)}f=f.replace(" 00:00:00","");return f}else{js.Web.ShowAlertMsg("你加载的js文件有问题")}}}return c},DateRender:function(f,g,a,h,c,b,e){if(f){var d=Date.parse(f);if(d){if(d.format){if($.Metro){return d.format("yyyy-mm-dd")}return d.format(js.Sys.DateFormatString)}else{js.Web.ShowAlertMsg("你加载的js文件有问题")}}}return f},AgeRender:function(d,g,b,c,f,e,h){if(d){var j=Date.parse(d);if(j){var a=new Date();return a.getYear()-j.getYear()}}return d},ValueNotNullRender:function(e,f,a,g,c,b,d){if(!e){e=0}return e},MoneyRender:function(e,f,a,g,c,b,d){if(!e){return e}if(isNaN(e)){return js.UI.GenerateButtonText("*",null,red)+e}return js.Math.Round(e,2)},MoneyToWRender:function(e,f,a,g,c,b,d){if(!e){return e}if(isNaN(e)){return js.UI.GenerateButtonText("*",null,red)+e}return js.Math.RoundTo10K(e,2)},ToPercentRender:function(e,f,a,g,c,b,d){if(!e){return e}if(isNaN(e)){return js.UI.GenerateButtonText("*",null,red)+e}return js.Math.Round(e*100,0)+" %"},NumberRender:function(e,f,a,g,c,b,d){if(!e){return e}if(isNaN(e)){return js.UI.GenerateButtonText("*",null,red)+e}return e},ChineseDigitsMap:["零","壹","贰","叁","肆","伍","陆","柒","捌","玖","拾"],ChineseRadicesMap:["","拾","佰","仟"],ChineseBigRadicesMap:["","万","亿","万亿","万万亿"],ChineseDecimalsMap:["角","分"],ChineseMaxNumber:10000000000000000000,NumberToChineseRender:function(z,t,j,q,v,n,g){g=g||this;if(!js.IsString(z)){z=z.toString()}var h=z,b=js.Renderer.ChineseMaxNumber,B="人民币",l="元",m="整",e="零",c,k,u="",y,s,a,x,D,r,A,w,C,f,o;h=h.replace(/,/g,"");h=h.replace(/^0+/,"");if(Number(h)>b){js.Web.ShowMsg("金额超过转换要求的最大值!");return"金额超过转换要求的最大值!"}y=h.split(".");s=js.Renderer.ChineseDigitsMap;a=js.Renderer.ChineseRadicesMap;x=js.Renderer.ChineseBigRadicesMap;D=js.Renderer.ChineseDecimalsMap;if(y.length>1){c=y[0];k=y[1]+"00";k=k.substr(0,2)}else{c=y[0];k=""}if(Number(c)>0){r=0;for(A=0;A<c.length;A++){w=c.length-A-1;C=c.substr(A,1);f=w/4;o=w%4;if(C=="0"){r++}else{if(r>0){u+=s[0]}r=0;u+=s[Number(C)]+a[o]}if(o==0&&r<4){u+=x[f]}}u+=l}if(k!=""){for(A=0;A<k.length;A++){C=k.substr(A,1);if(C!="0"){u+=s[Number(C)]+D[A]}}}if(u==""){u=e+l}if(k==""||k=="0"||k=="00"){u+=m}return u},AttachmentRender:function(h,m,e,g,k,j,n){if(!h){return null}n=n||this;e=e||{};var d=m.column||m,b=d.name||d.dataIndex,l=d.displayText||d.text,o=d.tooltip,c=e.tooltip||o||("点击查看"+l),f=d.target||"_blank",a=js.Web.GenerateUrl("","PreviewFile",h);return String.format('<a class="renderer-href perviewPdf attachment" href="javascript: void(0);" onclick="PdfView(this)" rel="{2}" style="text-decoration:underline" title="{0}">{1}</a>',c,l,h)},AjaxTooltipRender:function(o,k,b,j,m,g,a){if(!o){return null}a=a||this;b=b||{};b=b.data||b;var c=k.column||k,u=c.name||c.dataIndex,t=c.key||u||"Key",r=u+"_DisplayString",l=b[r]||o||c.displayText||c.text,f=c.url,e=c.tooltip,d=b.tooltip||e,s=c.target,h=c.dataWidth,p=c.dataHeight,n=c.dataTitle;if(js.IsFunction(f)){f=f.call(a||this,o,k,b,j,m,g,a)}else{if(f){var q=b.get?b.get(t):b[t];if(q){f=String.format(f,q,j)}else{if(f.indexOf("{0}")>=0){f=null}}}}if(!f&&!d){return l}d=d||"点击查看详细提示";return l+js.Web.CreateTooltipIcon(f,d,h,p,n,s,c.configs)}};js.Keys={SpeicalKeys:{BACKSPACE:"BACKSPACE",DELETE:"DELETE",TAB:"TAB",ENTER:"ENTER"},GeneralKeyDown:function(b){var a=this;var c=$(a).data("data-options");if(!c){return}},FilterAsIntFields:function(b,d,a){b=b||this;var e=$(b).val();var c=/\d+$/i;var f=js.Keys.FilterKeys(d,c,e,a)},FilterAsFloatFields:function(b,d,a,g){b=b||this;var e=$(b).val();var c=/^([1-9]\d*|0)(\.)?([0-9])?$/;var f=js.Keys.FilterKeys(d,c,e,a)},FilterKeys:function(h,f,b,g,a){if(h.ctrlKey){return false}var c=h.key;var j=c;if(c!=null){c=c.toUpperCase();if(c==js.Keys.SpeicalKeys.BACKSPACE||c==js.Keys.SpeicalKeys.TAB||(c==js.Keys.SpeicalKeys.DELETE&&h.button==-1)){return false}var d=/[0-9a-zA-Z.]/i;if(d.test(c)){j=c}else{j=String.fromCharCode(h.which||h.charCode||h.keyCode)}}else{c=h.which||h.charCode||h.keyCode;if(c==8||c==9||(c==46&&h.button==-1)){return false}j=String.fromCharCode(c)}if(!js.IsGecko&&!j){return false}if(b){j=b+j}if(f&&!f.test(j)){js.StopEvent(h);return false}if(!js.IsNull(g)&&(isNaN(j)||Number(j)>g)){js.StopEvent(h);return false}if(!js.IsNull(a)&&j.length>a){js.StopEvent(h);return false}return j}};js.HashQuery={getPageState:function(){if(!location.hash||location.hash.length==1){return}try{var hash=decodeURIComponent(location.hash),params=null;if(!hash){return null}if(hash.charAt("0")=="#"){hash=hash.substring(1)}params=eval("("+hash+")");return params}catch(error){}return null},savePageState:function(b){var e=js.ToJsonString(b,true),d=encodeURIComponent(e),c=location.toString(),a=c.indexOf("#");if(a>=0){c=c.substr(0,a)+"#"+d}else{c=c+"#"+d}location.replace(c);return c}};js.Controls={CreateControlItems:function(){var c=arguments[0],b=[];if(c==null||c.length<=0){return b}else{if(c.length<=1){return c[0]}}for(var e=0;e<c.length;e++){var a=c[e];if(a){if(js.IsArray(a)){for(var d=0;d<a.length;d++){b.push(a[d])}}else{b.push(a)}}}return b},GetSelectedItem:function(b,d){var a=null;if(b==null){return null}for(var c=0;c<b.length;c++){var e=b[c];if(e.Key==d){a=e;break}}return a},GetName:function(a){if(!a){return null}if(a.getName){return a.getName()}if(a.GetName){return a.GetName()}if(a.name){return a.name}if(a.length&&a.attr){return a.attr("name")}if(js.IsString(a)){return $(a).attr("name")}if(js.IsObject(a)){return $(a).attr("name")}return null},GetValue:function(a){if(!a){return null}if(a.getRealValue){return a.getRealValue()}if(a.getValue){return a.getValue()}if(a.GetValue){return a.GetValue()}if(a.length&&a.val){return a.val()}if(a.length&&a.attr){return a.attr("value")}if(js.IsString(a)){return $(a).val()}if(js.IsObject(a)){return $(a).val()}return a.value},SetValue:function(d,b,a){if(!d){return null}if(js.IsNull(b)&&a){return}var c=b;if(js.IsDate(b)){if(b.prototype){c=b.format()}}if(d.setValue){if(d.triggerClass=="x-form-date-trigger"){return d.setValue(c)}return d.setValue(b)}if(d.SetValue){return d.SetValue(d)}if(js.IsJQuery(d)){d.each(function(e,g){var f=g.tagName.toUpperCase();if(f=="SPAN"||f=="LABEL"){$(g).text(b)}else{$(g).val(b)}});return}if(d.length&&d.val){return d.val(c)}if(d.length&&d.attr){return d.attr("value",c)}if(js.IsString(d)||js.IsObject(d)){return $(d).val(c)}d.value=b;return b},GetValueForFields:function(a,c,b){c=c||{};js.Each(a,function(f,e,h){if(!f){return null}if(f.getValueAsContainer){f.getValueAsContainer(c,b)}else{if(f.xtype=="fieldcontainer"&&f.getValue){f.getValue(c,b)}else{var d=js.Controls.GetName(f);if(d){var g=js.Controls.GetValue(f);if(g||g===false||g===0||!b){c[d]=g}}if(f.nameForDisplay&&f.getValue){var g=f.getValue();if(g||g===false||g===0||!b){c[f.nameForDisplay]=g}}}}return f});if(c.commit){c.commit()}return c},SetValueForFields:function(h,b,g,e){h=js.Init.InitGlobalParams(h,null,null,true);var f,d,c,a;js.Each(b,function(j){if(!j){return null}j.record=h;j.baseValue=e;d=js.Controls.GetName(j);if(js.IsNull(d)){f=h}else{f=js.IsNull(h)?null:(h.get?h.get(d):h[d])}if(j.setValueAsContainer){j.setValueAsContainer(h)}else{js.Controls.SetValueForField(j,f,g)}if(e){a=true;if(js.IsNull(d)){c=e}else{c=e.get?e.get(d):e[d]}a=js.IsEqualTo(f,c,true);if(!a){if(j.addCls){j.addCls("ex-diff-field")}else{if(j.addClass){j.addClass("ex-diff-field")}}}else{if(j.removeCls){j.removeCls("ex-diff-field")}else{if(j.removeClass){j.removeClass("ex-diff-field")}}}}if(h&&j.getDisplayName&&j.setText){f=h.get?h.get(j.getDisplayName()):h[j.getDisplayName()];j.setText(f)}return j},this,true,false)},CreateToggleButton:function(a,c){var b='<div class="eui-toggle-button"><span class="icon '+a+'"></span><span class="content">'+c+"</span></div>";return b},CommonInit:function(a,c,f,e,b,d){a.className=c;js.CopyObject(f,a,true);js.Controls.AttachFilterControl(a,e);js.Controls.AttachListControl(a,b);if(!a.getFields){a.getFields=js.EmptyFn}if(!a.setValue){a.setValue=function(g){js.Controls.SetValueForFields(g,this.getFields())}}if(!a.getValue){a.getValue=function(g){return js.Controls.GetValueForFields(this.getFields(),g)}}if(!a.setCreateMode){a.setCreateMode=js.EmptyFn}c=a.className;if(c&&!window.eui[c]){}return a},AttachControl2Buttons:function(c,b){if(c&&b&&b.length){for(var a=0;a<b.length;a++){b[a].OwnerControl=c}}},AttachFilterControl:function(a,b){if(!b){return a}a.FilterControl=b;if(!b._RelatedControls){b._RelatedControls=[]}b._RelatedControls.push(a);if(a.initAsAutoStoreParams){a.initAsAutoStoreParams(b)}return a},AttachListControl:function(a,b){if(!b){return a}a.ListControl=b;js.Apply(a.Methods,b.Methods);if(!FilterControl._RelatedControls){FilterControl._RelatedControls=[]}FilterControl._RelatedControls.push(a);return a},TooltipControl:function(){var a=this,b=js.Controls.ScheduleAsCureUnit;a.renderTo=null;a.ui={el:null,headerEl:null,footerEl:null,bodyEl:null,buttons:[]};a.buttonConfigs=[];a.item=null;a.clipboardItem=null;a.initButton=function(d,j,c,g,f,h){h=h||{};if(j){h.text=j}if(c){h.cls=c}if(g){h.handler=g}if(f){h.scope=f}h.index=d;if(d>=a.buttonConfigs.length){a.buttonConfigs.length=d+1}a.buttonConfigs[d]=h;if(a.ui.buttons[d]){var e=a.ui.buttons[d];a.syncButtonConfig(e,h);e.show()}};a.showButton=function(c,e){var d=a.ui.buttons[c];if(d){if(e){d.show()}else{d.hide()}}};a.syncButtonConfig=function(c,d){if(!c||!d){return}c.html(d.text);if(d.cls){c.addClass(d.cls)}};a.setHeader=function(c){if(a.ui.headerEl){a.ui.headerEl.html(c)}};a.setFooter=function(c){if(a.ui.footerEl){a.ui.footerEl.html(c)}};a.setBody=function(c){if(a.ui.bodyEl){if(js.IsArray(c)&&!js.IsString(c)){var f="",e;for(var d=0;d<c.length;d++){e=c[d];f+='<div class="item '+(e.cls||"")+'"><span class="label">'+e.label+'</span><span class="field">'+e.field+"</span></div>"}c=f}a.ui.bodyEl.html(c);if(c){a.ui.bodyEl.show()}else{a.ui.bodyEl.hide()}}};a.show=function(h){h=h||this;if(!h.position){h=$(h)}var k=h.offset(),c=h.width(),l=h.height(),e=$(window),f=e.width(),g=e.height(),d=k.left,j=k.top+l+2;if(a.ui.el){a.ui.el.show()}if(d||d===0){a.ui.el.css("left",d)}if(j||j===0){a.ui.el.css("top",j)}};a.hide=function(){if(a.ui.el){a.ui.el.hide()}};a.render=function(){a.ui.el=$('<div class="ex-tooltip msg qtip-target"><div class="header"></div><div class="body"></div><div class="footer"></div></div>').appendTo($("body"));a.ui.headerEl=a.ui.el.find(".header");a.ui.bodyEl=a.ui.el.find(".body");a.ui.footerEl=a.ui.el.find(".footer");a.setFooter('<span class="button button1">按钮1</span><span class="button button2">按钮2</span><span class="button button3">按钮3</span><span class="button button4">按钮4</span>');var e=a.ui.footerEl.find(".button");for(var d=0;d<e.length;d++){var c=$(e[d]);c.attr("index",d);c.hide();a.ui.buttons.push(c)}e.on("click",a.onButtonClicked);a.ui.el.hide()};a.onButtonClicked=function(){var e=$(this),c=e.attr("index"),d=a.buttonConfigs[c];if(!d){return}if(d.handler){d.handler.call(d.scope||e,d)}}}};var eui={};js.UI.RegisterResource(eui);